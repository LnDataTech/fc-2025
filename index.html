<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>學習人生數據儀表板</title>
    <link rel="icon" href="favicon.ico" sizes="any">
    <link rel="icon" href="https://lndatatech.github.io/life-dashboard/favicon.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://lndatatech.github.io/life-dashboard/favicon.png">
    <meta name="description"
        content="LnData的學習人生數據儀表板透過有趣的心理測驗，探索你的性格特質與學習風格！歡迎學測放榜後的各位準大學生來試試，可以測出你獨一無二的儀表板喔！" />
    <meta name="keywords"
        content="學習 心理測驗, 學習 性格分析, 數據心理學, 人格測驗, 數據 心理測驗, 心理 小遊戲, 大數據心理測驗, 數據人生, 學習 儀錶板" />
    <meta name="author" content="LnData 麟數據科技" />
    <link rel="bookmark" href="https://raw.githubusercontent.com/LnDataTech/life-dashboard/refs/heads/main/favicon.ico">
    <link rel="shortcut icon"
        href="https://raw.githubusercontent.com/LnDataTech/life-dashboard/refs/heads/main/favicon.ico">

    <meta property="og:title" content="學習人生心理測驗｜生成你的人生儀表板" />
    <meta property="og:image"
        content="https://raw.githubusercontent.com/LnDataTech/life-dashboard/refs/heads/main/cover.png" />
    <meta property="og:url" content="https://lndatatech.github.io/life-dashboard" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="LnData" />
    <meta property="og:description"
        content="用數據揭開你的性格特質與學習風格！歡迎學測放榜後的各位準大學生來試試，可以測出你獨一無二的儀表板喔！" />
    <meta name="twitter:site" content="@LnData_Official" />
    <meta name="twitter:image"
        content="https://raw.githubusercontent.com/LnDataTech/life-dashboard/refs/heads/main/cover.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="學習人生數據儀表板" />
    <meta name="twitter:description"
        content="LnData的學習人生數據儀表板透過有趣的心理測驗，探索你的性格特質與學習風格！歡迎學測放榜後的各位準大學生來試試，可以測出你獨一無二的儀表板喔！" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "LnData 學習人生數據儀表板",
        "description": "透過有趣的心理測驗，探索你的性格特質與學習風格，並生成專屬的儀表板！",
        "url": "https://lndatatech.github.io/life-dashboard",
        "applicationCategory": "GameApplication",
        "operatingSystem": "All",
        "browserRequirements": "Requires JavaScript and a modern web browser.",
        "author": {
            "@type": "Organization",
            "name": "LnData 麟數據科技"
        }
    }
    </script>
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* 自定義漸變背景 */
        .gradient-bg {
            background-color: #111827;
            background-image: radial-gradient(at 47% 33%, hsl(204.00, 65%, 25%) 0, transparent 59%), 
                              radial-gradient(at 82% 65%, hsl(285.45, 45%, 20%) 0, transparent 55%);
        }
        /* 卡片樣式 */
        .card {
            background-color: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* 按鈕樣式 */
        .btn-primary {
            background-color: #3b82f6;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }
        .btn-primary:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
        }
        .btn-secondary {
            background-color: #4b5563;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: #6b7280;
        }
        /* 選項樣式 */
        .option-card {
            border: 2px solid #4b5563;
            transition: all 0.2s ease-in-out;
        }
        .option-card:hover {
            border-color: #3b82f6;
            transform: scale(1.03);
        }
        .option-card.selected {
            border-color: #3b82f6;
            background-color: rgba(59, 130, 246, 0.2);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
        }
        /* 隱藏滾動條 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #superpower-text {
            padding-top: 0.5rem; /* 8px */
        }
        .powers {
            padding-bottom: 0.25rem; /* 4px */
        }
        .values {
            line-height: 24px; 
        }
        /* Logo 樣式 */
        .lndata-logo, .fs-logo {
            position: fixed;
            bottom: 1.5rem;
            opacity: 0.6;
            transition: all 0.5s ease-in-out;
            z-index: 1000;
        }
        .lndata-logo {
            right: 1.5rem; 
        }
        .fs-logo {
            left: 1.5rem; 
        }
        .lndata-logo:hover , .fs-logo:hover {
            opacity: 1;
            transform: translateY(-4px);
        }
        .lndata-logo img , .fs-logo img {
            width: 120px;
        }
    </style>
</head>
<body class="gradient-bg text-white min-h-screen flex items-center justify-center p-4">

    <div id="app-container" class="w-full max-w-lg mx-auto">
        
        <!-- 開始畫面 -->
        <div id="start-screen" class="card rounded-2xl p-8 text-center animate-fade-in">
            <h1 class="text-3xl font-bold mb-2">數力覺醒：AI銀河轉型啟航</h1>
            <p class="text-gray-300 mb-2 ml-4 mr-4 text-center">留下您的名片並開始遊戲！完成即可領取紀念小物與抽取更多大獎！</p>
            <hr>
            <p class="text-gray-300 mt-2 mb-6 text-left text-sm">在浩瀚的商業宇宙中，傳說存在著一個名為「繁榮星系」的地方。然而，航道上充滿了未知的「數據黑洞」與「維運隕石風暴」。作為肩負企業未來的艦隊指揮官，你必須喚醒體內潛藏的「數力」，從零開始打造一支無堅不摧的AI艦隊。你的每一個決策，都將決定艦隊的命運。指揮官，請下達你的指令，啟航吧！</p>
            
            <div class="grid grid-cols-3 gap-4 items-center mb-6">
                <div class="col-span-1">
                    <img src="https://placehold.co/200x200/FFF/000?text=Scan+Me" alt="遊戲 QR Code" class="rounded-lg w-full">
                    <p class="text-xs mt-2 text-gray-400">手機掃描加入</p>
                </div>
                <div class="col-span-2 text-left bg-gray-800/50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2 text-lg">遊戲規則</h3>
                    <ul class="list-disc list-inside text-sm space-y-1 text-gray-300">
                        <li>建立你的艦隊檔案。</li>
                        <li>回答所有情境題，決定艦隊的命運。</li>
                        <li>獲得你的指揮官稱號與結局。</li>
                        <li>向工作人員出示畫面即可兌換獎勵！</li>
                    </ul>
                </div>
            </div>

            <button id="start-btn" class="btn-primary w-full py-3 rounded-lg text-lg font-bold">🚀 建立艦隊檔案</button>
        </div>

        <!-- 問答畫面 -->
        <div id="quiz-screen" class="hidden">
            <div id="quiz-container" class="card rounded-2xl p-6 sm:p-8">
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-1">
                         <span id="question-number" class="text-sm font-semibold text-blue-300"></span>
                         <span id="question-title" class="text-lg font-bold"></span>
                    </div>
                    <div class="w-full bg-gray-600 rounded-full h-2.5">
                        <div id="progress-bar" class="bg-blue-500 h-2.5 rounded-full transition-all duration-500"></div>
                    </div>
                </div>
                
                <div id="questions-wrapper" class="overflow-hidden">
                    <!-- 檔案建立 -->
                    <div id="question-1" class="w-full flex-shrink-0">
                        <h2 class="text-xl mb-4">建立你的艦隊檔案：</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="name-input" class="block text-base mb-2">指揮官，你的名字是？</label>
                                <input id="name-input" type="text" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="你的代號">
                            </div>
                            <div>
                                <label for="mascot-input" class="block text-base mb-2">你的艦隊吉祥物是什麼？</label>
                                <input id="mascot-input" type="text" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white" placeholder="例如：太空柯基、機器貓">
                            </div>
                            <div>
                                <label for="slogan-input" class="block text-base mb-2">你的AI之力武器是什麼？</label>
                                <input id="slogan-input" type="text" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white" placeholder="例如：資料光劍、IT原力">
                            </div>
                        </div>
                        <button id="name-submit-btn" class="btn-primary w-full py-3 rounded-lg text-lg font-bold mt-8">檔案建立，開始任務</button>
                    </div>

                    <!-- 問題2: 艦隊基石 -->
                    <div id="question-2" class="w-full flex-shrink-0 hidden">
                        <h2 class="mb-4">情境：啟航的命令已下達，但艦橋上的星圖顯示，從各偵察艦傳回的數據訊號 (顧客數據) 雜亂無章、互相衝突。你的首要任務是？</h2>
                        <div class="space-y-3">
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="60" data-next="3">🌌憑直覺和過往的航行日誌，隨便選一個方向前進。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="80" data-next="3">🌌只專注在最大、最清楚的單一訊號源。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="90" data-next="3">🌌命令航圖師手動將所有訊號數據匯出，整理成一張巨大的星圖表。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="100" data-next="3">🌌啟用「360數據星盤」，將所有偵察艦的訊號自動整合、校準，繪製成一張統一、即時的360度全景星圖。</div>
                        </div>
                    </div>
                    <!-- 問題3: 引擎打造 -->
                    <div id="question-3" class="w-full flex-shrink-0 hidden">
                        <h2 class="text-xl mb-4">情境：你擁有了完整的星圖，但要進行超光速的AI運算，需要一顆強大且穩定的超光速引擎。你會如何打造艦隊的動力核心？</h2>
                        <div class="space-y-3">
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="90" data-next="4">耗盡預算，打造一座巨大無比的一站式AI融合反應爐，固定在母艦上。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="60" data-next="4">試著用倉庫裡的備用零件自己拼湊一台，能動就好。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="100" data-next="4">建構一套「混合雲引擎陣列」，彈性擴充、自動調配，並交由銀河頂尖的「MSP維運公會」隨時監控維護。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="80" data-next="4">採購一台標準的通用型引擎，但節省預算不聘請專業技師維護。</div>
                        </div>
                    </div>
                    <!-- 問題4: 航道抉擇 -->
                    <div id="question-4" class="w-full flex-shrink-0 hidden">
                        <h2 class="text-xl mb-4">情境：引擎動力十足，星圖也清晰無比。面對數千個未知星系，你如何決定優先探索哪一個，才能找到最高價值的「資源星球」(潛力顧客)？</h2>
                        <div class="space-y-3">
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="100" data-next="5">啟動「AI航道預測系統」，分析數據並精準預測出「資源訊號」最強的星系，規劃最佳航線。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="80" data-next="5">朝著看起來最亮的那個星系前進，感覺那裡會有好東西。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="90" data-next="5">派出大量無人偵察機，對每個星系都進行初步掃描，雖然有些耗時耗力。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="60" data-next="5">沿著數百年前的古老貿易航道飛行，因為大家都這麼走。</div>
                        </div>
                    </div>
                    <!-- 問題5: 首次接觸 -->
                    <div id="question-5" class="w-full flex-shrink-0 hidden">
                        <h2 class="text-xl mb-4">情境：你的艦隊抵達了一個充滿潛力資源的星球。為了建立友好貿易關係，你發出的第一道訊息該是什麼？</h2>
                        <div class="space-y-3">
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="60" data-next="6">將母艦直接停在星球上空，用探照燈發出「我們來了」的訊號。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="80" data-next="6">向星球全境隨機投放大量的免費物資樣品，希望能吸引注意。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="90" data-next="6">向全星球廣播一則標準制式的「友好貿易邀請」。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="100" data-next="6">透過AI分析該星球文化與需求，向其領袖傳送一段個人化的全息投影訊息，精準表達合作誠意。</div>
                        </div>
                    </div>
                    <!-- 問題6: 永恆繁榮 -->
                    <div id="question-6" class="w-full flex-shrink-0 hidden">
                        <h2 class="text-xl mb-4">情境：貿易航線大獲成功！但宇宙海盜 (駭客) 也盯上了你。你該如何保護艦隊，並確保航線長治久安？</h2>
                        <div class="space-y-3">
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="100" data-next="submit">聘請「SOC銀河安全作戰中心」，進行全天候威脅監控與防禦，並持續優化艦隊系統，防患未然。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="60" data-next="submit">祈禱自己運氣好，並且命令艦隊飛快一點。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="80" data-next="submit">只教導船員基本的格鬥術，應對登艦作戰。</div>
                            <div class="option-card p-4 rounded-lg cursor-pointer" data-value="90" data-next="submit">為所有船艦都加裝最厚的裝甲與最強的雷射炮。</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 讀取畫面 -->
        <div id="loading-screen" class="hidden card rounded-2xl p-8 text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-t-2 border-blue-500 mx-auto"></div>
            <h2 class="text-2xl font-bold mt-6">正在分析您的「數力」...</h2>
            <p id="loading-text" class="text-gray-300 mt-2">校準航向中...</p>
        </div>

        <!-- 結果畫面 -->
        <div id="result-screen" class="hidden">
            <div id="dashboard-to-capture" class="card rounded-2xl p-6 sm:p-8 w-full gradient-bg">
                <div class="text-center border-b border-gray-600 pb-4 mb-4">
                     <p class="text-xs text-blue-300">自由系統×LnData《數力覺醒：AI銀河轉型啟航》</p>
                     <h1 id="commander-name" class="text-3xl font-bold mt-3">指揮官</h1>
                     <h2 id="commander-title" class="text-2xl font-semibold text-amber-300 mt-1"></h2>
                </div>
               
                <!-- 數力圖表 -->
                <div class="my-6 flex flex-col items-center justify-center">
                    <h3 class="font-semibold text-lg mb-2">您的數力</h3>
                    <div id="gauge-chart" class="relative w-48 h-28">
                        <!-- SVG for gauge will be injected here -->
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-6 my-6">
                    <div class="text-center bg-gray-700/50 rounded-xl p-4">
                        <h3 class="font-semibold text-lg mb-2">艦隊吉祥物</h3>
                        <div id="superpower-badge" class="text-yellow-300 text-5xl">👾</div>
                        <p id="mascot-display" class="text-xl mt-2 text-amber-300"></p>
                    </div>
                    <div class="text-center bg-gray-700/50 rounded-xl p-4">
                        <h3 class="font-semibold text-lg mb-2">AI武器</h3>
                        <div id="superpower-badge" class="text-yellow-300 text-5xl">⚔️</div>
                        <p id="slogan-display" class="text-xl mt-2 text-amber-300"></p>
                    </div>
                </div>

                <div class="mt-6 bg-gray-800/70 p-4 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">⭐最終任務報告</h3>
                    <p id="result-narrative" class="text-sm text-gray-300"></p>
                </div>
            </div>
            
            <div class="mt-6 flex flex-col sm:flex-row gap-4">
                 <button id="download-btn" class="btn-primary w-full py-3 rounded-lg text-lg font-bold">下載任務報告並繼續</button>
            </div>
        </div>

        <!-- 分享頁面 -->
        <div id="share-screen" class="hidden">
            <div class="card rounded-2xl p-8 text-center">
                <h2 class="text-3xl font-bold mb-4">任務完成！</h2>
                <p class="text-gray-300 mb-6">任務報告已下載。請依下列步驟回報，即可向艦隊後勤（LnData工作人員）領取獎勵！，即可兌換精美獎勵！依下列步驟完成任務，還有機會抽取額外大獎喔！</p>
                <div class="text-left bg-gray-800/50 p-6 rounded-lg space-y-4">
                     <div>
                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg mr-4 float-left">1</span>
                        <p class="font-semibold">公開分享儀表板圖片至您的社群平台 (FB/IG)。發文、打卡、限時動態都可以！</p>
                    </div>
                    <div>
                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg mr-4 float-left">2</span>
                        <p class="font-semibold">貼文需包含（擇一）指定 Hashtag <span class="text-amber-300">#數據領航IT護航</span>；或標記<span class="text-amber-300"> LnData</span>、<span class="text-amber-300">自由系統</span>帳號</p>
                    </div>
                     <div>
                        <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg mr-4 float-left">3</span>
                        <p class="font-semibold">向攤位工作人員出示您的分享畫面，即可獲得額外*抽獎機會！</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-300">*將依據hashtags或標記判定抽獎資格，記得將貼文設定為公開分享。7/4前將統計完並通知中獎人(依據您留下的名片聯絡資訊)。</p>
                    </div>
                    <hr>
                </div>
                <div class="mt-2 flex flex-col sm:flex-row gap-4">
                    <a href="https://www.lndata.com/" target="_blank" rel="noopener noreferrer" class="btn-primary w-full py-3 rounded-lg text-lg font-bold inline-block">填寫商機表單獲得更多抽獎機會</a>
                </div>
                <div class="mt-8 flex flex-col sm:flex-row gap-4">
                    <a href="https://www.lndata.com/" target="_blank" rel="noopener noreferrer" class="btn-secondary w-full py-3 rounded-lg text-lg font-bold inline-block">探索 LnData 官網</a>
                    <a href="https://www.lndata.com/" target="_blank" rel="noopener noreferrer" class="btn-secondary w-full py-3 rounded-lg text-lg font-bold inline-block">探索自由系統官網</a>
                </div>
                <div class="mt-8 flex justify-center items-center gap-x-8">
                    <button id="back-to-result-btn" class="text-gray-400 hover:text-white transition">‹ 返回任務報告</button>
                    <button id="restart-btn" class="text-gray-400 hover:text-white transition">重新啟航 ›</button>
                </div>
            </div>
        </div>
    </div>

    <a href="https://www.lndata.com/" target="_blank" rel="noopener noreferrer" class="fs-logo">
        <img src="./img/FS-logo-h.png" alt="自由系統 Logo"
        onerror="this.onerror=null; this.src='https://placehold.co/120x40/FFFFFF/000000?text=LnData';">
    </a>
    <a href="https://www.lndata.com/" target="_blank" rel="noopener noreferrer" class="lndata-logo">
        <img src="./img/LnData_logo_gw.png" alt="LnData 麟數據科技 Logo"
        onerror="this.onerror=null; this.src='https://placehold.co/120x40/FFFFFF/000000?text=LnData';">
    </a>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const screens = {
                start: document.getElementById('start-screen'),
                quiz: document.getElementById('quiz-screen'),
                loading: document.getElementById('loading-screen'),
                result: document.getElementById('result-screen'),
                share: document.getElementById('share-screen'),
            };

            const inputs = {
                name: document.getElementById('name-input'),
                mascot: document.getElementById('mascot-input'),
                slogan: document.getElementById('slogan-input'),
            };
            
            const buttons = {
                start: document.getElementById('start-btn'),
                nameSubmit: document.getElementById('name-submit-btn'),
                download: document.getElementById('download-btn'),
                backToResult: document.getElementById('back-to-result-btn'),
                restart: document.getElementById('restart-btn'),
            };
            
            const optionCards = document.querySelectorAll('.option-card');
            const progressBar = document.getElementById('progress-bar');
            const questionNumberEl = document.getElementById('question-number');
            const questionTitleEl = document.getElementById('question-title');

            let userAnswers = {};
            const questionTitles = ["建立檔案", "艦隊的基石", "引擎的打造", "航道的抉擇", "首次的接觸", "永恆的繁榮"];
            const TOTAL_QUIZ_STAGES = 6;
            
            const showScreen = (screenName) => {
                Object.values(screens).forEach(s => s.classList.add('hidden'));
                screens[screenName].classList.remove('hidden');
            };

            buttons.start.addEventListener('click', () => {
                showScreen('quiz');
                showQuestion(1);
            });
            
            buttons.nameSubmit.addEventListener('click', () => {
                if (!inputs.name.value.trim() || !inputs.mascot.value.trim() || !inputs.slogan.value.trim()) {
                    alert("指揮官，請完成所有艦隊檔案欄位！");
                    return;
                }
                userAnswers.name = inputs.name.value.trim();
                userAnswers.mascot = inputs.mascot.value.trim();
                userAnswers.slogan = inputs.slogan.value.trim();
                userAnswers.scores = [];
                showQuestion(2);
            });

            optionCards.forEach(card => {
                card.addEventListener('click', () => {
                    const questionDiv = card.closest('div[id^="question-"]');
                    const questionId = parseInt(questionDiv.id.split('-')[1]);
                    const nextAction = card.dataset.next;
                    
                    userAnswers.scores[questionId - 2] = parseInt(card.dataset.value);

                    questionDiv.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');

                    setTimeout(() => {
                        if (nextAction === 'submit') {
                            showScreen('loading');
                            simulateLoadingAndGenerateResult();
                        } else {
                            showQuestion(parseInt(nextAction));
                        }
                    }, 300);
                });
            });

            function showQuestion(id) {
                document.querySelectorAll('div[id^="question-"]').forEach(q => q.classList.add('hidden'));
                document.getElementById(`question-${id}`).classList.remove('hidden');

                progressBar.style.width = `${id / TOTAL_QUIZ_STAGES * 100}%`;
                questionNumberEl.textContent = `任務 ${id} / ${TOTAL_QUIZ_STAGES}`;
                questionTitleEl.textContent = questionTitles[id - 1];
            }

            function simulateLoadingAndGenerateResult() {
                const loadingTexts = ["校準航向中...", "分析艦隊決策...", "計算數力指數..."];
                let textIndex = 0;
                document.getElementById('loading-text').textContent = loadingTexts[0];
                const interval = setInterval(() => {
                    textIndex++;
                    if (textIndex < loadingTexts.length) {
                         document.getElementById('loading-text').textContent = loadingTexts[textIndex];
                    } else {
                        clearInterval(interval);
                        generateResult();
                        showScreen('result');
                    }
                }, 1000);
            }
            
            function generateResult() {
                const totalScore = userAnswers.scores.reduce((acc, score) => acc + score, 0);
                const averageScore = Math.round(totalScore / userAnswers.scores.length);

                let title = `指揮官 ${userAnswers.name}`;
                let narrative = '';

                if (averageScore >= 90) {
                    title = '【智能宇宙絕地武士】';
                    narrative = `指揮官${userAnswers.name}，恭喜你完美駕馭了「數力」，你帶著吉祥物 ${userAnswers.mascot} 跟AI武器 ${userAnswers.slogan} ，將數據洞察與穩固的艦隊實力結合，成功抵達「繁榮星系」，建立了銀河中最璀璨的商業帝國。你的傳奇，將在宇宙中永世流傳。`;
                } else if (averageScore >= 80) {
                    title = '【轉型艦隊司令官】';
                    narrative = `指揮官${userAnswers.name}，你擁有卓越的戰略眼光！你的艦隊在吉祥物「${userAnswers.mascot}」的守護下實力堅強，離「繁榮星系」僅一步之遙。除了${userAnswers.slogan}，若能在艦隊的「維運安全」與「自動化」上稍加優化，你的霸業將無人能敵。歡迎到洽談區，讓我們的領航員為您規劃最後一哩路。`;
                } else if (averageScore >= 70) {
                    title = '【勇敢的轉型拓荒者】';
                    narrative = `指揮官${userAnswers.name}，你的勇氣可嘉！你已帶著${userAnswers.mascot}勇敢地駛入AI銀河，但你的艦隊引擎不穩、星圖模糊，時常陷入險境。你需要更穩固的基礎建設與更精準的數據羅盤，搭配你的${userAnswers.slogan}發揮最佳戰力！別擔心，我們的艦隊工程師能幫您全面升級。`;
                } else {
                    title = '【迷航的太空數位新人】';
                    narrative = `指揮官${userAnswers.name}，你的艦隊正在數據黑洞的邊緣漂移！吉祥物「${userAnswers.mascot}」也顯得有些無助。你急需建立一套可靠的導航與動力系統。前方充滿危險，帶上你的${userAnswers.slogan}尋求協助吧！請立即與我們攤位上的任何一位船員聯繫，讓我們為你校準航向！`;
                }
                
                document.getElementById('commander-name').textContent = `指揮官 ${userAnswers.name}`;
                document.getElementById('commander-title').textContent = title;
                document.getElementById('mascot-display').textContent = userAnswers.mascot;
                document.getElementById('slogan-display').textContent = userAnswers.slogan;
                document.getElementById('result-narrative').textContent = narrative;

                createGaugeChart(averageScore);
            }
            
            function createGaugeChart(value) {
                const gaugeChartContainer = document.getElementById('gauge-chart');
                if (!gaugeChartContainer) return;
                const percentage = value / 100;
                const degrees = percentage * 180;
                const rads = (degrees * Math.PI) / 180;
                const r = 80;
                const x = r * Math.cos(rads);
                const y = r * Math.sin(rads);
                gaugeChartContainer.innerHTML = `
                    <svg viewBox="-100 -20 200 110" class="w-full h-full">
                        <defs>
                            <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#3b82f6" />
                                <stop offset="100%" stop-color="#a855f7" />
                            </linearGradient>
                        </defs>
                        <path d="M -80 80 A 80 80 0 0 1 80 80" fill="none" stroke="#4b5563" stroke-width="16" stroke-linecap="round" />
                        <path d="M -80 80 A 80 80 0 0 1 ${-x} ${80 - y}" fill="none" stroke="url(#gaugeGradient)" stroke-width="16" stroke-linecap="round" />
                        <text x="0" y="65" text-anchor="middle" font-size="40" font-weight="bold" fill="#fff">${value}</text>
                    </svg>
                `;
            }

            buttons.download.addEventListener('click', () => {
                html2canvas(document.getElementById('dashboard-to-capture'), {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: null
                }).then(canvas => {
                    const image = canvas.toDataURL("image/png");
                    const link = document.createElement('a');
                    link.download = `數力覺醒任務報告-${userAnswers.name}.png`;
                    link.href = image;
                    link.click();
                    
                    setTimeout(() => showScreen('share'), 500);
                });
            });

            buttons.backToResult.addEventListener('click', () => {
                showScreen('result');
            });
            
            buttons.restart.addEventListener('click', () => {
                userAnswers = {};
                Object.values(inputs).forEach(input => input.value = '');
                document.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
                showScreen('start');
            });
        });
    </script>
</body>
</html>
